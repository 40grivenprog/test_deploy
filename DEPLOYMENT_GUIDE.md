# üöÄ Deployment Guide

## üìã **–ö–∞–∫ –¥–µ–ø–ª–æ–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é:**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ PR —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏**
```bash
git checkout -b feature/new-feature
# –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥
git add .
git commit -m "Add new feature"
git push origin feature/new-feature
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–µ–π–±–ª–∞ –∫ PR (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)**
–í GitHub –¥–æ–±–∞–≤—å—Ç–µ –æ–¥–∏–Ω –∏–∑ –ª–µ–π–±–ª–æ–≤ –∫ PR:
- **`patch`** - –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –±–∞–≥–æ–≤ (0.0.1 ‚Üí 0.0.2)
- **`minor`** - –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (0.0.1 ‚Üí 0.1.0)
- **`major`** - –¥–ª—è breaking changes (0.0.1 ‚Üí 1.0.0)

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** PR –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–º–µ—Ä–∂–µ–Ω –±–µ–∑ –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ–≥–æ –ª–µ–π–±–ª–∞!

**üîí Branch Protection:** –í–µ—Ç–∫–∞ `main` –∑–∞—â–∏—â–µ–Ω–∞ –∏ —Ç—Ä–µ–±—É–µ—Ç:
- –£—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ "Check Version Label"
- –ú–∏–Ω–∏–º—É–º 1 approval –æ—Ç —Ä–µ–≤—å—é–µ—Ä–∞

### **3. –ú–µ—Ä–∂ PR –≤ main**
–ü–æ—Å–ª–µ –º–µ—Ä–∂–∞ PR –≤ main –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è draft release —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π.

### **4. –ü—É–±–ª–∏–∫–∞—Ü–∏—è Release**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Releases** –≤ GitHub
2. –ù–∞–π–¥–∏—Ç–µ draft release
3. –ù–∞–∂–º–∏—Ç–µ **"Publish release"**

### **5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞**
–ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ release –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–±–∏—Ä–∞–µ—Ç—Å—è Docker –æ–±—Ä–∞–∑
- –ü—É—à–∏—Ç—Å—è –≤ ECR —Å —Ç–µ–≥–æ–º –≤–µ—Ä—Å–∏–∏
- –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ–±—Ä–∞–∑–µ

### **6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞ –≤ values.yaml**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–≥–∞
./scripts/update-image-tag.sh v1.0.0

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –æ–±–Ω–æ–≤–∏—Ç–µ helm/go-app/values.yaml
# –ò–∑–º–µ–Ω–∏—Ç–µ tag: "v1.0.0"
```

### **7. –°–æ–∑–¥–∞–Ω–∏–µ PR –¥–ª—è –¥–µ–ø–ª–æ—è**
```bash
git add helm/go-app/values.yaml
git commit -m "Update image to v1.0.0"
git push origin feature/deploy-v1.0.0
```

### **8. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π**
–ü–æ—Å–ª–µ –º–µ—Ä–∂–∞ PR ArgoCD –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é.

## üîß **–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
```bash
# –°—Ç–∞—Ç—É—Å ArgoCD –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
kubectl get applications -n argocd

# –°—Ç–∞—Ç—É—Å –ø–æ–¥–æ–≤
kubectl get pods

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
kubectl logs -f deployment/go-app
```

### **–î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:**
```bash
# Port-forward –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
kubectl port-forward service/go-app 8080:8080

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
curl http://localhost:8080/api/hello
```

## üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- **ArgoCD UI**: `kubectl port-forward service/argocd-server -n argocd 8080:443`
- **–õ–æ–≥–∏**: `kubectl logs -n argocd -l app.kubernetes.io/name=argocd-application-controller`

## üè∑Ô∏è **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- **patch**: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ (0.0.1 ‚Üí 0.0.2)
- **minor**: –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (0.0.1 ‚Üí 0.1.0)  
- **major**: breaking changes (0.0.1 ‚Üí 1.0.0) 